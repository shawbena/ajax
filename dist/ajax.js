!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("querystring")):"function"==typeof define&&define.amd?define(["querystring"],t):"object"==typeof exports?exports.ajax=t(require("querystring")):e.ajax=t(e.querystring)}(this,function(e){return function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){"use strict";function r(){if(XMLHttpRequest)return new XMLHttpRequest;if(ActiveXObject){var e=void 0;if("string"!=typeof e)for(var t=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp"],o=0;o<versions.length;o++)try{new ActiveXObject(versions[o]),e=t[o];break}catch(e){}return new ActiveXobject(e)}throw new Error("NO XHR OBJECT AVALIABLE.")}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e,t,o){function u(){"function"!=typeof t&&throwError("成功回调不存在或者不是函数");var e=void 0,o=0==x.getResponseHeader("Content-Type").indexOf("application/json");if(1504==(e="json"==g||o?JSON.parse(x.response||x.responseText):x.response||x.responseText).record)return popo("用户未登录或登录过期，请重新登录"),void setTimeout(function(){window.location="login"},800);t(e)}"string"==typeof e&&(e={url:e,method:"get"});var f=(e=e||{}).url,p=e.method||"get",a=e.async||!0,c=e.user,d=e.password,l=e.headers||{},y=e.progress,v=e.data,b=e.dataType,g=e.responseType,x=void 0;if("string"!=typeof f&&throwError("url 不存在或不是字符串！"),!/^\//.test(f)&&!/^https?:/.test(f)){if(!(f=i.URL_MAPS[f]))throw Error("url not exist or invalide");f=0==f.indexOf("/")?i.URL_PREFIX+f:i.URL_PREFIX+"/"+f}if("get"===p){var j=f.split("?")[1],m="";f=f.indexOf("?")>-1?f.slice(0,f.indexOf("?")):f,m+=s.encode(s.decode(j)),v&&(m+=s.encode(v)),m&&"string"==typeof m&&(f+="?"+m)}if(x=r(),x.onreadystatechange=function(){4==x.readyState&&200==x.status&&u()},g&&"string"==typeof g&&(x.responseType=g),x.open(p,f,a,c,d),"object"==(void 0===l?"undefined":n(l)))for(var w in l)x.setRequestHeader(w,l[w]);if("json"===b&&x.setRequestHeader("Content-Type","application/json"),"function"==typeof y&&x.upload.on("progress",y),x.onerror=function(e){"function"==typeof o&&o(e)},"get"==p)x.send(v||null);else if("json"===b)x.send(JSON.stringify(v));else if("formData"==b){var M=new FormData;for(var O in v)M.append(O,v[O]);x.send(M)}else"post"==p&&(x.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),x.send(s.encode(v)));return x};var i=o(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(o(2))},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.URL_PREFIX="",t.URL_MAPS={}},function(t,o){t.exports=e}])});
//# sourceMappingURL=ajax.js.map