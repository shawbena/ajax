{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 20cc46f20e0d77ff5bd2","webpack:///./src/index.js","webpack:///./src/config.js","webpack:///external \"querystring\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","createXHR","XMLHttpRequest","ActiveXObject","activeXString","version","versions","length","ex","ActiveXobject","Error","options","success","error","processResult","throwError","res","contentTypeJson","xhr","getResponseHeader","indexOf","responseType","JSON","parse","response","responseText","record","popo","setTimeout","window","location","url","method","async","user","password","headers","progress","data","dataType","test","_config","URL_MAPS","URL_PREFIX","urlQueryString","split","urlComponent","slice","queryString","encode","decode","onreadystatechange","readyState","status","open","_typeof","props","setRequestHeader","upload","on","onerror","err","send","stringify","formData","FormData","append"],"mappings":"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","file":"ajax.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"querystring\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"querystring\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ajax\"] = factory(require(\"querystring\"));\n\telse\n\t\troot[\"ajax\"] = factory(root[\"querystring\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 20cc46f20e0d77ff5bd2","import { URL_MAPS, URL_PREFIX } from './config';\nimport * as queryString from 'querystring';\n\n/**\n * \n * @param {Object} options \n * @param {Function} success \n * @param {Function} error \n */\nexport default function ajax(options, success, error) {\n    if(typeof options === 'string'){\n        options = {url: options, method: 'get'};\n    }\n    options = options || {};\n    let url = options.url;\n    let method = options.method || 'get';\n    let async = options.async || true;\n    let user = options.user;\n    let password = options.password;\n    let headers = options.headers || {};\n    let progress = options.progress;\n    let data = options.data;\n    let dataType = options.dataType;\n    let responseType = options.responseType;\n    let xhr;\n    if (typeof url != 'string') {\n        throwError('url 不存在或不是字符串！');\n    }\n    if (!/^\\//.test(url) && !/^https?:/.test(url)) {\n        url = URL_MAPS[url];\n        if(!url){\n            throw Error('url not exist or invalide');\n        }\n        if(url.indexOf('/') == 0){\n            url = URL_PREFIX + url;\n        }else{\n            url = URL_PREFIX + '/' + url;\n        }\n    }\n    //get 请求, data 转换为 url 片段, 如果 options.url 中有查询字符串则会被保留\n    //其他请求方法会把 options.url 中的查询字符串丢掉\n    if (method === 'get') {\n        let urlQueryString = url.split('?')[1];\n        let urlComponent = '';\n        url = url.indexOf('?') > -1 ? url.slice(0, url.indexOf('?')) : url;\n\n        urlComponent += queryString.encode(queryString.decode(urlQueryString));\n        if (data) {\n            urlComponent += queryString.encode(data)\n        }\n        if (urlComponent && typeof urlComponent == 'string') {\n            url += '?' + urlComponent;\n        }\n    }\n    xhr = createXHR();\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState == 4 && xhr.status == 200) {\n            processResult();\n        };\n    }\n    if (responseType && typeof responseType == 'string') {\n        xhr.responseType = responseType;\n    }\n    xhr.open(method, url, async, user, password);\n    //设置请求头\n    if (typeof headers == 'object') {\n        for (let props in headers) {\n            xhr.setRequestHeader(props, headers[props]);\n        }\n    }\n    if(dataType === 'json'){\n        xhr.setRequestHeader('Content-Type', 'application/json');\n    }\n    if (typeof progress == 'function') {\n        xhr.upload.on('progress', progress);\n    }\n    xhr.onerror = function (err) {\n        if (typeof error == 'function') {\n            error(err);\n        }\n    };\n    if (method == 'get') {\n        xhr.send(data || null);\n    } else if (dataType === 'json') {\n        xhr.send(JSON.stringify(data));\n    } else if (dataType == 'formData') {\n        let formData = new FormData();\n        for (let props in data) {\n            formData.append(props, data[props]);\n        }\n        xhr.send(formData);\n    } else if (method == 'post') {\n        xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');\n        xhr.send(queryString.encode(data));\n    }\n    //处理响应原始数据\n    function processResult() {\n        if (typeof success != 'function') {\n            throwError('成功回调不存在或者不是函数');\n        }\n        let res;\n        let contentTypeJson = xhr.getResponseHeader('Content-Type').indexOf('application/json') == 0 ? true : false;\n        if (responseType == 'json' || contentTypeJson) {\n            //IE9 没有 response 属性\n            res = JSON.parse(xhr.response || xhr.responseText);\n        } else {\n            res = xhr.response || xhr.responseText;\n        }\n        if(res.record == 1504){\n            popo('用户未登录或登录过期，请重新登录');\n            setTimeout(function() {\n                window.location = 'login';\n            }, 800);\n            return;\n        }\n        success(res);\n    }\n    return xhr;\n}\n\nfunction createXHR() {\n    if (XMLHttpRequest) {\n        return new XMLHttpRequest();\n    }\n    if (ActiveXObject) {\n        let activeXString;\n        if (typeof activeXString != 'string') {\n            let version = ['MSXML2.XMLHttp.6.0', 'MSXML2.XMLHttp.3.0', 'MSXML2.XMLHttp'];\n            for (let i = 0; i < versions.length; i++) {\n                try {\n                    new ActiveXObject(versions[i]);\n                    activeXString = version[i];\n                    break;\n                } catch (ex) {\n\n                }\n            }\n        }\n        return new ActiveXobject(activeXString);\n    } else {\n        throw new Error('NO XHR OBJECT AVALIABLE.');\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export const URL_PREFIX = '';\n\nexport const URL_MAPS = {\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"querystring\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}