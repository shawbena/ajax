{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 22d14282dc73bcdab583","webpack:///./src/index.js","webpack:///./src/config.js","webpack:///external {\"commonjs\":\"querystring\",\"commonjs2\":\"querystring\",\"amd\":\"querystring\",\"root\":\"queryString\"}","webpack:///external {\"commonjs\":\"path\",\"commonjs2\":\"path\",\"amd\":\"path\",\"root\":\"path\"}"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","createXHR","XMLHttpRequest","ActiveXObject","activeXString","version","versions","length","ex","ActiveXobject","Error","getUrl","url","test","path","join","_config","URL_PREFIX","URL_MAPS","options","success","error","processResult","res","responseType","xhr","getResponseHeader","Content","Type","JSON","parse","response","responseText","method","ajaxOptions","async","dataType","headers","password","progress","user","urlQueryString","split","urlComponent","random","queryString","encode","Math","indexOf","slice","decode","data","addEventListener","readyState","status","err","upload","on","open","_typeof","keys","forEach","prop","props","setRequestHeader","send","stringify","formData","FormData","append"],"mappings":"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","file":"ajax.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"querystring\"), require(\"path\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"querystring\", \"path\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ajax\"] = factory(require(\"querystring\"), require(\"path\"));\n\telse\n\t\troot[\"ajax\"] = factory(root[\"queryString\"], root[\"path\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 22d14282dc73bcdab583","import { URL_MAPS, URL_PREFIX } from './config';\nimport * as queryString from 'querystring';\nconst path = require('path');\n/**\n * \n * @param {Object} options \n * @param {Function} success \n * @param {Function} error \n */\nexport default function ajax(options, success, error) {\n    if(typeof options === 'string'){\n        options = {url: options, method: 'get'};\n    }\n    let defaultOptions = {\n        async: true,\n        dataType: null,\n        headers: {},\n        method: 'get',\n        password: null,\n        progress: null,\n        responseType: null,\n        url: null,\n        user: null,\n    };\n\n    let ajaxOptions = { ...defaultOptions, ...options };\n\n    \n    let url = getUrl(ajaxOptions.url);\n    let method = ajaxOptions.method;\n    let dataType = ajaxOptions.dataType;\n    let headers = ajaxOptions.headers;\n    //get 请求, data 转换为 url 片段, 如果 options.url 中有查询字符串则会被保留\n    //其他请求方法会把 options.url 中的查询字符串丢掉\n    if (method === 'get') {\n        let urlQueryString = url.split('?')[1];\n        let urlComponent = '';let random = queryString.encode({ random: Math.random() });\n        url = url.indexOf('?') > -1 ? url.slice(0, url.indexOf('?')) : url;\n\n        urlComponent += queryString.encode(queryString.decode(urlQueryString));\n        if (data) {\n            urlComponent += queryString.encode(data)\n        }\n        if (urlComponent && typeof urlComponent == 'string') {\n            url += '?' + urlComponent;\n            url += `?${urlComponent}&${random}`;\n        }else{\n            url += `?${random}`\n        }\n    }\n\n    let xhr = createXHR();\n    xhr.addEventListener('readystatechange', function () {\n        if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 304)) {\n            processResult();\n        };\n    });\n\n    xhr.addEventListener('error', function (err) {\n        if (typeof error == 'function') {\n            error(err);\n        }\n    });\n\n    if (typeof progress == 'function') {\n        xhr.upload.on('progress', progress);\n    }\n\n    if (responseType && typeof responseType == 'string') {\n        xhr.responseType = responseType;\n    }\n\n\n    xhr.open(method, url, async, user, password);\n    //设置请求头\n    if (typeof headers == 'object') {\n        Object.keys(headers).forEach((prop) => {\n            props && xhr.setRequestHeader(props, headers[props]);\n        });\n    }\n    if(dataType === 'json'){\n        xhr.setRequestHeader('Content-Type', 'application/json');\n    }\n    \n\n    if (method == 'get') {\n        xhr.send(data || null);\n    } else if (dataType === 'json') {\n        xhr.send(JSON.stringify(data));\n    } else if (dataType == 'formData') {\n        let formData = new FormData();\n        for (let props in data) {\n            formData.append(props, data[props]);\n        }\n        xhr.send(formData);\n    } else if (method == 'post') {\n        xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');\n        xhr.send(queryString.encode(data));\n    }\n    /**\n     * process result.\n    */\n    function processResult() {\n        let res;\n        if (responseType == 'json' || /(application|text)\\/json/.test(xhr.getResponseHeader(Content-Type))) {\n            //IE9 没有 response 属性\n            res = JSON.parse(xhr.response || xhr.responseText);\n        } else {\n            res = xhr.response || xhr.responseText;\n        }\n\n        typeof success === 'function' && success(res);\n    }\n    return xhr;\n}\n\nfunction createXHR() {\n    if (XMLHttpRequest) {\n        return new XMLHttpRequest();\n    }\n    if (ActiveXObject) {\n        let activeXString;\n        if (typeof activeXString != 'string') {\n            let version = ['MSXML2.XMLHttp.6.0', 'MSXML2.XMLHttp.3.0', 'MSXML2.XMLHttp'];\n            for (let i = 0; i < versions.length; i++) {\n                try {\n                    new ActiveXObject(versions[i]);\n                    activeXString = version[i];\n                    break;\n                } catch (ex) {\n\n                }\n            }\n        }\n        return new ActiveXobject(activeXString);\n    } else {\n        throw new Error('NO XHR OBJECT AVALIABLE.');\n    }\n}\n\n\nfunction getUrl(url){\n    // exist && non-empty string\n    if (!/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/.test(url)) {\n        throw new Error('url must be string');\n    }\n\n    // url mapping\n    if (!/^\\/|https?/.test(url)) {\n        return path.join(URL_PREFIX + URL_MAPS[url]);\n    }\n\n    return url;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export const URL_PREFIX = '';\n\nexport const URL_MAPS = {\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"querystring\",\"commonjs2\":\"querystring\",\"amd\":\"querystring\",\"root\":\"queryString\"}\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"path\",\"commonjs2\":\"path\",\"amd\":\"path\",\"root\":\"path\"}\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}